---
title: Android Development Notes
tags:
  - android
published: true
---

# Android Development Notes
* TOC
{:toc}


## WearOS

* [Design principles](https://developer.android.com/design/ui/wear/guides/foundations/design-principles)
* [Samples](https://developer.android.com/design/ui/wear/samples)

* [Get started with Wear OS](https://developer.android.com/training/wearables)
* [Wear OS Pathway](https://developer.android.com/courses/pathways/wear)
* [Create and run an app on Wear OS](https://developer.android.com/training/wearables/get-started/creating)


* [Use Jetpack Compose on Wear OS ](https://developer.android.com/training/wearables/compose)
* [Compose for Wear OS Codelab](https://developer.android.com/codelabs/compose-for-wear-os#0)

* [Wear OS app quality](https://developer.android.com/docs/quality-guidelines/wear-app-quality)

### Samples

[android/wear-os-samples: Multiple samples showing best practices in app and watch face development on Wear OS.](https://github.com/android/wear-os-samples/tree/main)
* [Compose for Wear OS Advanced Sample](https://github.com/android/wear-os-samples/tree/main/ComposeAdvanced)



## Learn Android 

* [Android Basics in Kotlin course  -  Android Developers](https://developer.android.com/courses/android-basics-kotlin/course)
* [Use coroutines in common Android use cases  -  Android Developers](https://developer.android.com/courses/pathways/android-coroutines)
* [Advanced Android in Kotlin  -  Training Courses  -  Android Developers](https://developer.android.com/courses/kotlin-android-advanced/overview)
* [Introduction to coroutines](https://developer.android.com/codelabs/basic-android-kotlin-training-introduction-coroutines?hl=en#0)
* [android/sunflower: A gardening app illustrating Android development best practices with Android Jetpack.](https://github.com/android/sunflower)
* [Modern Android App Architecture  -  Android Developers](https://developer.android.com/courses/pathways/android-architecture)
* [Android Kotlin Fundamentals  -  Training Courses  -  Android Developers](https://developer.android.com/courses/kotlin-android-fundamentals/overview)


## Material 3

https://m3.material.io/

* [Getting started with MDC-Android – Material Design 3](https://m3.material.io/libraries/mdc-android/getting-started)
* [Visualizing dynamic color in your app](https://codelabs.developers.google.com/visualize-dynamic-color#0)
* [Material Theme Builder](https://material-foundation.github.io/material-theme-builder/#/dynamic)
* [Adding dynamic color to your app](https://codelabs.developers.google.com/codelabs/apply-dynamic-color#0)



## 2022

[Build your first app  -  Android Basics  -  Android Developers](https://developer.android.com/training/basics/firstapp)

* [Guide to app architecture  -  Android Developers](https://developer.android.com/jetpack/guide)
* [DataStore  -  Android Developers](https://developer.android.com/topic/libraries/architecture/datastore)
* [Schedule tasks with WorkManager  -  Android Developers](https://developer.android.com/topic/libraries/architecture/workmanager)
* [Navigation  -  Android Developers](https://developer.android.com/guide/navigation)
* [Dependency injection in Android  -  Android Developers](https://developer.android.com/training/dependency-injection)
* [Support modern emoji  -  Android Developers](https://developer.android.com/guide/topics/ui/look-and-feel/emoji2)
* [Splash screens  -  Android Developers](https://developer.android.com/guide/topics/ui/splash-screen)
* [Display content edge-to-edge in your app  -  Android Developers](https://developer.android.com/training/gestures/edge-to-edge)
* [Supporting Swipe-to-Refresh  -  Android Developers](https://developer.android.com/training/swipe)
* [Selecting Colors with the Palette API  -  Android Developers](https://developer.android.com/training/material/palette-colors)
* [Reducing image download sizes  -  Android Developers](https://developer.android.com/topic/performance/network-xfer)
* [Remember and authenticate users  -  Android Developers](https://developer.android.com/training/id-auth)
* [About Android App Bundles  -  Android Developers](https://developer.android.com/guide/app-bundle)
* [Dependency injection in Android  -  Android Developers](https://developer.android.com/training/dependency-injection)
* [Google Codelabs](https://codelabs.developers.google.com/?cat=Android)
* [Android Developers Blog: Announcing the new guide to Android app modularization](https://android-developers.googleblog.com/2022/09/announcing-new-guide-to-android-app-modularization.html)

### Android features

* [App shortcuts overview  -  Android Developers](https://developer.android.com/guide/topics/ui/shortcuts)
* [App Startup  -  Android Developers](https://developer.android.com/topic/libraries/app-startup)
* [Google Play In-App Review API  -  Android Developers](https://developer.android.com/guide/playcore/in-app-review)
* [In-app updates  -  Android Developers](https://developer.android.com/guide/playcore/in-app-updates)
* [App Actions  -  Google Developers](https://developers.google.com/assistant/app)
* Paging
* Themed App Icons - https://developer.android.com/about/versions/13/features#themed-app-icons
* Multilingual settings - https://developer.android.com/about/versions/13/features#language-support


## Testing 

* [Test apps on Android  -  Android Developers](https://developer.android.com/training/testing)


## Jetpack Compose

* [Android Basics with Compose course  -  Android Basics in Compose  -  Android Developers](https://developer.android.com/courses/android-basics-compose/course)
* [Get started with Jetpack Compose  -  Android Developers](https://developer.android.com/jetpack/compose/documentation)
* [Bye XML, it was nice knowing you (pt. 1) - by Filip Wiesner - MateeDevs - Apr, 2021 - Medium](https://medium.com/mateedevs/bye-xml-it-was-nice-knowing-you-pt-1-50b195bab1a9)
* [android/compose-samples: Official Jetpack Compose samples.](https://github.com/android/compose-samples)
* [Layouts in Compose  -  Jetpack Compose  -  Android Developers](https://developer.android.com/jetpack/compose/layouts)
* [Thinking in Compose  -  Jetpack Compose  -  Android Developers](https://developer.android.com/jetpack/compose/mental-model)
* [Why We Adopted Jetpack Compose. Illustrated with Feature Examples - by Chen Zhang - Aug, 2022 - ProAndroidDev](https://proandroiddev.com/why-we-adopted-jetpack-compose-b66bfd3dbde5)

### Tutorials


* [Jetpack Compose for Android Developers](https://developer.android.com/courses/jetpack-compose/course)
* [Jetpack Compose  -  Android Developers](https://developer.android.com/courses/pathways/compose)
* [Android Compose Tutorial -  Android Developers](https://developer.android.com/jetpack/compose/tutorial)
* [Layouts in Jetpack Compose](https://developer.android.com/codelabs/jetpack-compose-layouts#0)

## Journeys

* [Architecture Learning Journey](https://github.com/android/nowinandroid/blob/main/docs/ArchitectureLearningJourney.md)
* [Design Journey](https://medium.com/androiddevelopers/now-in-android-a-material-3-case-study-21e44bdfd2bc)

## Accessibility 

* [Make your Android app more accessible  -  Android Developers](https://developer.android.com/courses/pathways/make-your-android-app-accessible)
* [Build more accessible apps  -  Android Developers](https://developer.android.com/guide/topics/ui/accessibility)


## Animations

* Drawable animation APIs
* Property animation system (android.animation)
  * ValueAnimator
  	* ObjectAnimator
    * ViewPropertyAnimator
  * AnimatorSet
* Auto animate (`android:animateLayoutChanges="true"`) 
* Layout changes (when swapping layout within activity/fragment)
* Animate between activities


## Checklists 

* [Quality  -  Android Developers](https://developer.android.com/quality)


## Flow vs LiveData

* [Flow/LiveData….What Are They? Best Use Case. (Lets Build a Login System) - by Inuwa Ibrahim - Apr, 2021 - ProAndroidDev](https://proandroiddev.com/flow-livedata-what-are-they-best-use-case-lets-build-a-login-system-39315510666d)

## Intents

Example from [Intents and Intent Filters](https://developer.android.com/guide/components/intents-filters.html#ExampleSend)
```
// Create the text message with a string
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, textMessage);
sendIntent.setType("text/plain");

// Verify that the intent will resolve to an activity
if (sendIntent.resolveActivity(getPackageManager()) != null) {
    startActivity(sendIntent);
}
```


## Github Actions

https://proandroiddev.com/android-ci-cd-pipeline-with-github-actions-demystifying-github-actions-83258e76a18f

## Preserve state when navigating upwards

	android:launchMode

When up-navigation is present, use `singleTop` for the main activity to preserve state when navigating upwards. This will also stop new activites from being started from a notification.

See 
* [android:launchMode](https://developer.android.com/guide/topics/manifest/activity-element.html#lmode)
* [Tasks and Back Stack](https://developer.android.com/guide/components/activities/tasks-and-back-stack.html#TaskLaunchModes)
* [android - How can I return to a parent activity correctly?](http://stackoverflow.com/questions/12276027/how-can-i-return-to-a-parent-activity-correctly/15933890#15933890)

## Uri

Build URLs using [Uri.Builder](https://developer.android.com/reference/android/net/Uri.Builder.html)

## compileSdkVersion, minSdkVersion, and targetSdkVersion

* [Picking your compileSdkVersion, minSdkVersion, targetSdkVersion](https://medium.com/google-developers/picking-your-compilesdkversion-minsdkversion-targetsdkversion-a098a0341ebd#.6xnsu03hg)

## Organizing code

* [Please, don’t commit commented out code](https://medium.com/@kentcdodds/please-don-t-commit-commented-out-code-53d0b5b26d5f#.ju4jsavqz)
* [Android Project Structure — alternative way](https://medium.com/google-developer-experts/android-project-structure-alternative-way-29ce766682f0#.h71ecd3x8)
* [Object Oriented Tricks: #4 Starter Pattern -Android Edition](https://hackernoon.com/object-oriented-tricks-4-starter-pattern-android-edition-1844e1a8522d)

## Previewing layouts in Android Studio

Use the tools attribute
* [Tools Attributes Reference](https://developer.android.com/studio/write/tool-attributes.html)
* [Things You May Not Know: Tools Attributes](http://www.randomlytyping.com/blog/2015/6/17/things-you-may-not-know-about-tools-attributes)

Frpm Android Studio 3.0, samples are available:
```
@sample/lorem
```

## Lifecycle

* When Android is killing the acitivity, `onStop()` is called

An Activity appears in the foreground
`onCreate` -> `onStart` -> `onResume`

An Activity is sent to the background (app switched)
`onPause` -> `onStop` -> `onDestroy`

From Active to Visible (but not active) (modals)
`onPause` -> `onResume`

From Active or Visible to Background
`onPause` -> `onStop` -> `onRestart` -> `onStart` 

![Lifecycle](https://i.stack.imgur.com/HNzS6.png)

* [The Android Activity Lifecycle](https://www.youtube.com/watch?v=LFTYZrYARUw) (YouTube)
* [Reto On The Android Activity Lifecycle](https://www.youtube.com/watch?v=0JpxCe4G5cc) (YouTube)


## Loaders

* Use loaders to avoid recreating async tasks between config changes
* Code: [Add AsyncTaskLoader](https://github.com/udacity/ud851-Exercises/blob/T05b.02-Solution-AddAsyncTaskLoader/app/src/main/java/com/example/android/asynctaskloader/MainActivity.java)
* YouTube: [Leveraging Loaders in Github Query](https://www.youtube.com/watch?v=5o7SN8Z3VWs)
* Code: [Cache data so loader won't start ehen user navigates away from activity](https://github.com/udacity/ud851-Exercises/blob/T05b.03-Solution-PolishAsyncTask/app/src/main/java/com/example/android/asynctaskloader/MainActivity.java)
* Code: [Sunshine AsyncTaskLoader](https://github.com/udacity/ud851-Sunshine/compare/S05.01-Exercise-AsyncTaskLoader...S05.01-Solution-AsyncTaskLoader)

## Persistance

Five ways to persist data in Android:

* onSavedInstance
* SharedPreferences
* SQLLite Db
* File
* Server

### Preferences

* Use PreferenceFragment instead of Preference Activity
* [Make a PreferenceFragment](https://www.youtube.com/watch?v=AFCywvOnM2M) (YouTube)
* [Make A Preference Fragment](https://github.com/udacity/ud851-Exercises/compare/T06.02-Exercise-MakeAPreferenceFragment...T06.02-Solution-MakeAPreferenceFragment) (Code)

#### Reading From SharedPreferences

`getDefaultSharedPreferences` 
: Gets a SharedPreferences instance that points to the default file that is used by the preference framework in the given context!

`getSharedPreferences`
: Gets a specific SharedPreferences instance by name in case you have more than one preference in the same context!

#### Preference Change Listener
* Don't forget to unregister in `onDestroy()`
* `SharedPreferenceChangeListener` is triggered after any value is saved to the SharedPreferences file.
* `PreferenceChangeListener` is triggered before a value is saved to the SharedPreferences file. Because of this, it can prevent an invalid update to a preference. PreferenceChangeListeners are also attached to a single preference.

#### Update preference fragment
* [Preference Summary](https://www.youtube.com/watch?v=cXqgkDC8fNg) (YouTube) 
* [PreferenceSummary](https://github.com/udacity/ud851-Exercises/compare/T06.08-Exercise-PreferenceSummary...T06.08-Solution-PreferenceSummary) (Code)

#### Guidelines
* [Settings](https://material.io/guidelines/patterns/settings.html#settings-placement) (Material design guidelines)

#### Should it be a setting?

![Make it a setting?](https://d17h27t6h515a5.cloudfront.net/topher/2016/November/582a4eda_screen-shot-2016-11-14-at-3.55.51-pm/screen-shot-2016-11-14-at-3.55.51-pm.png)

### SQLLite Database

* [Cheat sheet](https://d17h27t6h515a5.cloudfront.net/topher/2016/September/57ed880e_sql-sqlite-commands-cheat-sheet/sql-sqlite-commands-cheat-sheet.pdf) (PDF)
* [SQL Tutorial](http://www.w3schools.com/sql/)

#### Create a database

* [Create a database](https://github.com/udacity/ud851-Exercises/compare/T07.02-Exercise-CreateTheDatabase...T07.02-Solution-CreateTheDatabase) (Code)

## Content provider

* [Example App](https://github.com/udacity/ud851-Exercises/tree/student/Lesson09-ToDo-List/T09.07-Solution-SwipeToDelete)
* [AddAsyncTaskToRetrieveCursor](https://github.com/udacity/ud851-Exercises/tree/student/Lesson08-Quiz-Example/T08.02-Exercise-AddAsyncTaskToRetrieveCursor) (Code)
* [Sunshine ContentProvider Foundation](https://github.com/udacity/ud851-Sunshine/compare/S09.01-Exercise-ContentProviderFoundation...S09.01-Solution-ContentProviderFoundation) (Code)
* [Sunshine: Using CursorLoader](https://github.com/udacity/ud851-Sunshine/compare/S09.04-Exercise-UsingCursorLoader...S09.04-Solution-UsingCursorLoader) (Code)

#### Using a ContentProvider

1. Get permission to use the ContentProvider.

       <uses-permission android:name="com.example.appname.TERMS_READ" />

2. Get the ContentResolver

       ContentResolver resolver = getContentResolver();
       Cursor cursor = resolver.query(Contract.CONTENT_URI, null, null, null, null);

3. Pick one of four basic actions on the data: query, insert, update, delete
4. Identify the data you are reading or manipulating to create a URI
5. In the case of reading from the ContentProvider, display the information in the UI

#### Creating a content provider

1. Extend the ContentProvider class and implement the required methods
2. Register it in the Manifest
3. Define URI's
4. Add URI's to the contract class
5. Build a URIMatcher to match URI patterns


URI Example:

	content://com.example.appname/specificData

CONTENT_URI

Cursor methods arguments

* projection - filter columns
* selection - how to filter rows
* selection args - what to filter
* sort order

Match integer: #
Match string: *

Example of `getType`:

```
public String getType(@NonNull Uri uri) {
    int match = sUriMatcher.match(uri);

    switch (match) {
        case TASKS:
            // directory
            return "vnd.android.cursor.dir" + "/" + TaskContract.AUTHORITY + "/" + TaskContract.PATH_TASKS;
        case TASK_WITH_ID:
            // single item type
            return "vnd.android.cursor.item" + "/" + TaskContract.AUTHORITY + "/" + TaskContract.PATH_TASKS;
        default:
            throw new UnsupportedOperationException("Unknown uri: " + uri);
    }
}
```

The best way to asynchronously load data from any ContentProvider is with a CursorLoader

[Comparing S09.05-Exercise-MoreDetails...S09.05-Solution-MoreDetails · udacity/ud851-Sunshine](https://github.com/udacity/ud851-Sunshine/compare/S09.05-Exercise-MoreDetails...S09.05-Solution-MoreDetails)


BulkInsert
[Comparing S09.02-Exercise-ContentProviderBulkInsert...S09.02-Solution-ContentProviderBulkInsert · udacity/ud851-Sunshine](https://github.com/udacity/ud851-Sunshine/compare/S09.02-Exercise-ContentProviderBulkInsert...S09.02-Solution-ContentProviderBulkInsert)

## Code Quality

* Manual check
* Reformat code (Ctrl+Alt+L)
* Optimize imports
* Inspect code
* Code cleanup

## Services

Background task

"More background" than Loader (more front-end)
Loaders outlasts configuration changes
Services outlasts activites

Start a service
* Start
  * IntentService
* Schedule
  * JobScheduler
    * FirebaseJobDispatcher
* Bind - for ongoing communication with an activity

Lifecycle:
* A service is started from a context with _startService()_ 
* onCreate()
* onStartCommadn()
* Service is running
* Create AsyncTask
* stopSelf()
* onDestroy()

* [Android: Service, IntentService, AsyncTask and Thread – marsic|dev](http://marsic.info/2016/03/01/android-service-intent-asynctask-thread/)

### IntentService

Automatically runs on the background thread in order, perfect for one off tasks that need to be handled in the background _in order_.

Runs on a worker thread (compared to the main thread for a Service).

Stops itself after requests have been handled unlike a Service which needs to be stopped with `stopSelf()` or `stopService()`

"Fire and forget"

[Comparing T10.01-Exercise-IntentServices...T10.01-Solution-IntentServices · udacity/ud851-Exercises](https://github.com/udacity/ud851-Exercises/compare/T10.01-Exercise-IntentServices...T10.01-Solution-IntentServices)

#### Android 8.0

Many apps that rely on IntentService do not work properly when targeting Android 8.0 or higher. For this reason, Android Support Library 26.0.0 introduces a new JobIntentService class, which provides the same functionality as IntentService but uses jobs instead of services when running on Android 8.0 or higher.

https://developer.android.com/reference/android/support/v4/app/JobIntentService.html



### JobService

The base class that handles asynchronous requests that were previously scheduled in a JobScheduler. 

Because it runs on the main thread any task needs to be set up on another thread/handler/AsyncTask to avoid blocking future callbacks from the JobManager.

[Adding a JobService - YouTube](https://www.youtube.com/watch?v=vZBxSDhXDlc)
[Exercise: Schedule with FirebaseJobDispatcher - YouTube](https://www.youtube.com/watch?v=lVwknCi7i_s)

It’s important that we verify that we’ve imported `jobdispatcher.JobService` rather than the Android framework’s `JobService`, because if you do, you’ll definitely have some headaches. Double and triple check that please.

[Android Developers Blog: Moar Power in Android 9 Pie and the future](https://android-developers.googleblog.com/2018/09/moar-power-in-android-9-pie-and-future.html)

### ForegroundService

Service required to have a non-dismissible ongoing notification. Less likely to be destroyed when memory gets low.

## JobScheduler

### FirebaseJobDispatcher

* Add Gradle dependeency
* Create a task to be runned
* Create a service extending JobService
* Add the JobService to the Manifest
* Schedule the JobService with FirebaseJobDispatcher

Example
```
Driver driver = new GooglePlayDriver(context);
FirebaseJobDispatcher dispatcher = new FirebaseJobDispatcher(driver);

Job myJob = dispatcher.newJobBuilder()
    // the JobService that will be called
    .setService(MyJobService.class)
    // uniquely identifies the job
    .setTag("complex-job")
    // one-off job
    .setRecurring(false)
    // don't persist past a device reboot
    .setLifetime(Lifetime.UNTIL_NEXT_BOOT)
    // start between 0 and 15 minutes (900 seconds)     
    .setTrigger(Trigger.executionWindow(0, 900))
    // overwrite an existing job with the same tag
    .setReplaceCurrent(true)
    // retry with exponential backoff 
    .setRetryStrategy(RetryStrategy.DEFAULT_EXPONENTIAL)
    // constraints that need to be satisfied for the job to run
    .setConstraints(
        // only run on an unmetered network
        Constraint.ON_UNMETERED_NETWORK,
        // only run when the device is charging
        Constraint.DEVICE_CHARGING
    )
    .build();
```

[Scheduling Jobs - YouTube](https://www.youtube.com/watch?v=bTFIr9pWnCg)
[The Firebase JobDispatcher](https://github.com/firebase/firebase-jobdispatcher-android)

[Comparing T10.04-Exercise-PeriodicSyncWithJobDispatcher...T10.04-Solution-PeriodicSyncWithJobDispatcher · udacity/ud851-Exercises](https://github.com/udacity/ud851-Exercises/compare/T10.04-Exercise-PeriodicSyncWithJobDispatcher...T10.04-Solution-PeriodicSyncWithJobDispatcher)

## String resources

### Pluralization

XML
```
<plurals name="charge_notification_count">
   <item quantity="zero">Hydrate while charging reminder sent %d times</item>
   <item quantity="one">Hydrate while charging reminder sent %d time</item>
   <item quantity="other">Hydrate while charging reminder sent %d times</item>
</plurals>
```

Java
```
String formattedChargingReminders = getResources().getQuantityString(R.plurals.charge_notification_count, chargingReminders, chargingReminders);
```

[Documentation](https://developer.android.com/guide/topics/resources/string-resource.html#Plurals)

### String format

XML
```
<string name="format_art_url" translatable="false">https://raw.githubusercontent.com/udacity/Sunshine-Version-2/sunshine_master/app/src/main/res/drawable-xxhdpi/art_<xliff:g id="description">%s</xliff:g>.png</string>
```

Java
```
context.getString(R.string.format_art_url, "clear");
```


## PendingIntent

Intent in your app designed to be started by another app/service.

This allows a notification (which is handled by the NotificationManager (a system service)) to start your App.

## Notifications

* Use NotificationCompat.Builder to create notifications.
* Get the NotificationManager: `context.getSystemService(Context.NOTIFICATION_SERVICE)`
* Notify! `notificationManager.notify(...)`

Use a PendingIntent to open your App from a notification.

[Notifications - Patterns - Material design guidelines](https://material.io/guidelines/patterns/notifications.html#)

[Notifications - Android Developers](https://developer.android.com/guide/topics/ui/notifiers/notifications.html)
[Using Big View Styles - Android Developers](https://developer.android.com/training/notify-user/expanded.html)
[Notification.BigPictureStyle - Android Developers](https://developer.android.com/reference/android/app/Notification.BigPictureStyle.html)

[Comparing T10.02-Exercise-CreateNotification...T10.02-Solution-CreateNotification · udacity/ud851-Exercises](https://github.com/udacity/ud851-Exercises/compare/T10.02-Exercise-CreateNotification...T10.02-Solution-CreateNotification)

[Add actions to notifications](https://github.com/udacity/ud851-Exercises/compare/T10.03-Exercise-NotificationActions...T10.03-Solution-NotificationActions)

[Engage with rich notifications](https://developer.android.com/distribute/best-practices/engage/rich-notifications.html)

Check for Google Play Services both in onCreate() and onResume()

For Android versions >= HONEYCOMB, notifcation image sizes can be found with 
```
int largeIconWidth = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ? 
	? resources.getDimensionPixelSize(android.R.dimen.notification_large_icon_width)
	: resources.getDimensionPixelSize(R.dimen.notification_large_icon_default);
```
Where `R.dimen.notification_large_icon_default` is set to `48dp`

Set the color for notifications from Firebase in the manifest with:
```
<!-- Set custom default icon. This is used when no icon is set for incoming notification messages.
     See README(https://goo.gl/l4GJaQ) for more. -->
<meta-data
    android:name="com.google.firebase.messaging.default_notification_icon"
    android:resource="@drawable/ic_stat_ic_notification" />
<!-- Set color used with incoming notification messages. This is used when no color is set for the incoming
     notification message. See README(https://goo.gl/6BKBk7) for more. -->
<meta-data
    android:name="com.google.firebase.messaging.default_notification_color"
    android:resource="@color/colorAccent" />
```

If the device doesn't have a compatible version of Google Play services, your app can call [GoogleApiAvailability.makeGooglePlayServicesAvailable()](https://developers.google.com/android/reference/com/google/android/gms/common/GoogleApiAvailability.html#public-methods) to allow users to download Google Play services from the Play Store.

* [Notification Channels - Android Developers](https://developer.android.com/preview/features/notification-channels.html)
* [Notification Badges - Android Developers](https://developer.android.com/preview/features/notification-badges.html)

Must use channels once target O is targeted.


## Memory prioritization

* Critical
	* Active apps
    * Foreground processes
* High
	* Visible processes
* Medium
    * Service processes
* Low
   * Background processes
   * Empty processes
   
## Broadcast Receiver

System Broadcast Intents - triggers for various device changes. 

Creating a broadcast receiever: 

* Static - triggered even when app is offline
* Dynamic - dependent on apps lifecycle

To handle broadcasts when app isn't started: JobDispatcher or in some cases a static broadcast receiver
To handle broadcasts when app is started: dynamic broadcast receiver

Register in onResume() and unregister in onPause if it only is needed for foreground stuff.

[Comparing T10.05-Exercise-ChargingBroadcastReceiver...T10.05-Solution-ChargingBroadcastReceiver · udacity/ud851-Exercises](https://github.com/udacity/ud851-Exercises/compare/T10.05-Exercise-ChargingBroadcastReceiver...T10.05-Solution-ChargingBroadcastReceiver)

## Android Debug Bridge


Start app
```
adb shell am start -n com.package.name/com.package.name.ActivityName
```

Simulate unplugging from USB
```
adb shell dumpsys battery set usb 0
```

Above for Android 6.0+
```
adb shell dumpsys battery unplug
```

Simulate plugging into power 
```
adb shell dumpsys battery reset
```

[Android Debug Bridge - Android Studio](https://developer.android.com/studio/command-line/adb.html?utm_source=udacity&utm_medium=mooc&utm_term=android&utm_content=adb&utm_campaign=training)

## View and View Groups

Avoid nesting view and viewgroups too deep.

General rule of thumb:
* Avoid more than 80 views 
* Avoid more than 10 nested groups

[Views & View Groups - YouTube](https://www.youtube.com/watch?v=8agCiQzDZys)

[Correct the ImageView's adjustViewBounds behaviour on API Level 17 and below with AdjustableImageView :: The Cheese Factory](https://inthecheesefactory.com/blog/correct-imageview-adjustviewbounds-with-adjustable-imageview/en)

### ViewGroups

#### FrameLayout

#### LinearLayout

#### RelativeLayout

#### GridLayout



#### ConstraintLayout

Center vertically by putting a top-constraint to the bottom of the other view, and a bottom-constraint to the top of the other view 

* [Using ConstraintLayout to design your views](https://codelabs.developers.google.com/codelabs/constraint-layout/#0)

## TextAppearance

Captions

	@style/TextAppearance.AppCompat.Captiom
    
Headline

	@style/TextAppearance.AppCompat.Display1
    
## Hierarchy viewer

Tools > Device monitor > Perspective > Hierarcy viewer

## Accessibility

* TalkBack - screen reader
* Explore by Touch - makes TalkBack speak whatever is being touched
* Accessibility settings - display and sound options

- Use `contentDescription` on all ImageViews, ImageButtons and Checkboxes
	- Text labels, buttons with text and EditTexts normally do not need contentDescription
    - Don't forget contentDescription on dynamically added views
- Enable focus-based navigation
- No audio-only feedback

[Accessibility Developer Checklist - Android Developers](https://developer.android.com/guide/topics/ui/accessibility/checklist.html#recommendations)

## Localization

[Localization Checklist - Android Developers](https://developer.android.com/distribute/tools/localization-checklist.html)
[ISO 639-2 Language Code List - Codes for the representation of names of languages (Library of Congress)](https://www.loc.gov/standards/iso639-2/php/code_list.php)
[Localization checklist - Android Developers](https://developer.android.com/distribute/best-practices/launch/localization-checklist.html)
    
## RecyclerView

Different views in a RecyclerView
[Comparing S11.02-Exercise-TodayListItem...S11.02-Solution-TodayListItem · udacity/ud851-Sunshine](https://github.com/udacity/ud851-Sunshine/compare/S11.02-Exercise-TodayListItem...S11.02-Solution-TodayListItem)

* [android - RecyclerView store / restore state between activities - Stack Overflow](http://stackoverflow.com/questions/28236390/recyclerview-store-restore-state-between-activities/28262885#28262885)

Provide height and width or face the consequences

## DesignSupportLibrary

* [CoordinatorLayout](http://antonioleiva.com/collapsing-toolbar-layout/)



## Parcel

http://blog.bradcampbell.nz/a-comparison-of-parcelable-boilerplate-libraries/


## Style vs Theme

A theme is a style applied to an activity

For lists, use dimensions such as: `@dimen/list_item_icon_margin_right`

## Layout

Use the smallest width qualifier

`?attr/listPreferredItemHeight`

## Touch selectors

0. Create drawable `list_item_selector.xml`
0. Root element should be selector 
0- Add items for different states
   * state_pressed
   * state_activated
   * state_selected
   * default
   Note: each item can have a color as the drawable
0. Set background of item to be selected to the newly created touch selector

## Publishing an app

* [Launch checklist](https://developer.android.com/distribute/best-practices/launch/launch-checklist.html)

## Material Design

* [Material Docs](https://materialdoc.com/)
* [Use Material Design](https://developer.android.com/distribute/best-practices/develop/use-material-design.html)

### Typography

Display 4 corresponds to 

	android:textAppearance="@style/TextAppearance.AppCompat.Display4"
    
and so on...

* [Android Developers Blog: What's new for text in Android P](https://android-developers.googleblog.com/2018/07/whats-new-for-text-in-android-p.html)

## Libraries

Look for support, documentation and functionality

## Testing

[Android Testing Codelab](https://codelabs.developers.google.com/codelabs/android-testing/index.html?index=..%2F..%2Findex#0)

## Material design

### Toolbar

Default toolbar size height: `?attr/actionBarSize"

Style with 
```
   android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar"   
```

### Card

`cardPreventCornerOverlap="false"`



## Refs
Aliases as resources

refs.xml
```
<resources>
  <item type="layout" name="refName">@layout/some_layout</item>
</resources>
```

## RecyclerView

### Item choices
https://github.com/udacity/Advanced_Android_Development/compare/6.17_Improving_our_RecyclerView...6.18_Bonus_RecyclerView_Code
[Using RecyclerView Part 3 - YouTube](https://www.youtube.com/watch?v=Vz7H78-vFU0)

[Implementing a modal selection helper for RecyclerView](https://medium.com/@BladeCoder/implementing-a-modal-selection-helper-for-recyclerview-1e888b4cd5b9)

### Parallell scrolling

0. Attach scrollListener
* Change translation in y of background by half in relative to the y scroll
* Clear onScrollListeners in onDestroy

[Scrolling in Parallel - YouTube](https://www.youtube.com/watch?v=AGcugMbwwJ8)
[Scrolling in Parallel - YouTube](https://www.youtube.com/watch?v=jKayW_Gek8w)


## Support higher screen ratios

In order to support screen ratios such as 18.5:9 (like that on the Samsung Galaxy S8), add the following to the manifest, in the application element:

  <meta-data android:name="android.max_aspect"
      android:value="ratio_float"/>


_Where ratio_float is the maximum aspect ratio your app can support, expressed as (longer dimension / shorter dimension) in decimal form. _

https://android-developers.googleblog.com/2017/03/update-your-app-to-take-advantage-of.html

## Transitions

Exclude navigation bar and status bar with `@android:id/statusBarBackground` and `@android:id/navigationBarBackground` respectively. 

* Create transitions resource (v21)
* Add to theme and enable for both starting end ending activity (in v21 style)

```
<item name="android:windowContentTransitions">true</item>
<item name="android:windowEnterTransition">@transition/enter_transition</item>
<item name="android:windowReturnTransition">@transition/return_transition</item>
```

* Start activity with

```
ActivityOptionsCompat activityOptions = ActivityOptionsCompat.makeSceneTransitionAnimation(this);
ActivityCompat.startActivity(this, intent, activityOptions.toBundle());
```

[Animation Resources - Android Developers](https://developer.android.com/guide/topics/resources/animation-resource.html)
[The Transitions Framework - Android Developers](https://developer.android.com/training/transitions/overview.html)
[Animating Views Using Scenes and Transitions - Android Developers](https://developer.android.com/training/transitions/index.html)
[Applying a Transition - Android Developers](https://developer.android.com/training/transitions/transitions.html)

* [Workcation App – Part 4. Shared Element Transition with RecyclerView and Scenes – Droids On Roids Blog](https://www.thedroidsonroids.com/blog/workcation-app-part-4-shared-element-transition-recyclerview-scenes/?utm_source=Android+Weekly&utm_campaign=2b67d3db13-android-weekly-253&utm_medium=email&utm_term=0_4eb677ad19-2b67d3db13-338005577)
* [From design to android, part 1 · Saúl Molinero](http://saulmm.github.io/from-design-to-android-part1?utm_source=Android+Weekly&utm_campaign=0657fbdef4-android-weekly-249&utm_medium=email&utm_term=0_4eb677ad19-0657fbdef4-338005577)


### Shared elements
* Add `android:transitionName` to view in destination
* Add `android:transitionName` to view in origin byt code

   ViewCompat.setTransitionName(viewHolder, viewToAnimate, "transitionName")
   
   
[Shared Element Transitions (solution) - YouTube](https://www.youtube.com/watch?v=gzSRpXuVKAY)

[Android Developers Blog: Continuous Shared Element Transitions: RecyclerView to ViewPager](https://android-developers.googleblog.com/2018/02/continuous-shared-element-transitions.html)

## Places API

* Find your app's certificate information
  * Find debug keystore file
  * ` keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android`
  * Copy the key 
* [Enable the Places API in the Developer Console](https://console.developers.google.com/flows/enableapi?apiid=placesandroid&keyType=CLIENT_SIDE_ANDROID)
* Get an Android API key
* Add the API key to your Android manifest file.

[Comparing 8.00_Places_API_Start...8.07_Adding_Attributions · udacity/Advanced_Android_Development](https://github.com/udacity/Advanced_Android_Development/compare/8.00_Places_API_Start...8.07_Adding_Attributions)

[Place Picker  -  Google Places API for Android  -  Google Developers](https://developers.google.com/places/android-api/placepicker#add)

## Widgets

* Use Widget Preview App in emulators to generate preview image
* Margins are automatically provided on Android 4.0+ (wrap in frame layout for backwards compability)
* Add to manifest

[Creating the Widget’s view - YouTube](https://www.youtube.com/watch?v=SUGWOtTe0kQ)
[7.01_Sunshines_First_Widget · udacity/Advanced_Android_Development](https://github.com/udacity/Advanced_Android_Development/compare/7.00_Building_a_Total_Experience...7.01_Sunshines_First_Widget)

SyncAdapter
* onPerformSync()
AppWidgetProvider
* onReceive() 
* onUpdate()
IntentService
* onHandleIntent()

* Current size of widgets (Android 4.1+)
AppWidgetManager.getAppWidgetOptions().getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH);

`minResizeWidth` can be set to smaller than default size `minWidth`

Collection widget: [YouTube](https://www.youtube.com/watch?v=9GyoNEbouYc)

### AppWidgetProviderInfo (XML)

Required attributes
* initialLayout
* minWidth
* minHeight 

``` 
Size = 70dp * n - 30dp
= 40 dp for n = 1
= 110 dp    = n = 2
```

### AppWidgetProvider (Java)
  * ConfigurationActivity

```
public class TodayWidgetProvider extends AppWidgetProvider {
  @Override 
  public void onUpdate(Context context, AppWidgetManager manager, int[} appWidgetIds) {
    for (int appWidgetId : appWidgetIds) {
      RemoteViews = views = new RemoteViews(context.getPackageName(), R.layot.widget_today_small);
      
      // Clickable widget
      Intent intent = new Intent(context, MainActivity.class);
      PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
      views.setOnClickPendingIntent(R.id.widget, pendingIntent);
      
      manager.updateAppWidget(appWidgetId, views);
      
    }  
  }
}
```

## Performance

"Users will complain about performance 3x than any other issue"

[Performance Tips - Android Developers](https://developer.android.com/training/articles/perf-tips.html)

### Overdraw

Test overdraw
* Developer Options -> Hardware accelerated rendering -> Debug GPU Overdraw -> Show overdraw areas

### Memory Monitor

[Manage Your App's Memory - Android Developers](https://developer.android.com/topic/performance/memory.html)

## Night Mode

https://developer.android.com/preview/features/darktheme

## Publishing

* Cryptographic keys MUST have a validity period that ends after 22 October 2033.
* ["To Do" list before publishing android app to market - Stack Overflow](http://stackoverflow.com/questions/5119633/to-do-list-before-publishing-android-app-to-market)

## Fonts

* [Android O: Fonts – Part 1 – Styling Android](https://blog.stylingandroid.com/android-o-fonts/?utm_source=Android+Weekly&utm_campaign=2b67d3db13-android-weekly-253&utm_medium=email&utm_term=0_4eb677ad19-2b67d3db13-338005577)

## MVI - Model View Intent

* [REACTIVE APPS WITH MODEL-VIEW-INTENT - PART1 - MODEL - HANNES DORFMANN](http://hannesdorfmann.com/android/mosby3-mvi-1)

* [My take on Model View Intent (MVI) — Part 1: State Renderer](https://medium.com/hacker-daily/model-view-intent-mvi-part-1-state-renderer-187e270db15c)

## Debugging

* [Why your app should crash · Jeroen Mols](http://jeroenmols.com/blog/2017/03/08/appcrash/?utm_source=Android+Weekly&utm_campaign=a7b955ad5e-android-weekly-248&utm_medium=email&utm_term=0_4eb677ad19-a7b955ad5e-338005577)

## Fragments


**Getting context**
> Fragment#requireContext, for example, returns a non-null Context and throws an IllegalStateException if called when a Context would be null. This way, you can treat the resulting Context as non-null without the need for safe-call operators or workarounds.

* [Use common Kotlin patterns with Android](https://developer.android.com/kotlin/common-patterns#android) - Android Developers




* [Read Fragments: The Solution to (and Cause of) All of Android’s Problems](https://news.realm.io/news/michael-yotive-state-of-fragments-2017/?utm_source=Android+Weekly&utm_campaign=9411db07ba-android-weekly-254&utm_medium=email&utm_term=0_4eb677ad19-9411db07ba-338005577)

## UX

* [Design your app to drive conversions - Android Developers](https://developer.android.com/distribute/best-practices/develop/design-to-drive-conversions.html)

## Check for unessecary added permissions from libraries

[How Libraries can silently add permissions to your Android App](https://medium.com/glucosio-project/how-libraries-can-silently-add-permissions-to-your-android-app-620911d7de6c)

## Android Architecture 

[Android Developers Blog: Android and Architecture](https://android-developers.googleblog.com/2017/05/android-and-architecture.html)

[Guide to App Architecture - Android Developers](https://developer.android.com/topic/libraries/architecture/guide.html)

## WebView

### Enable Google Safe Browsing API

Same as in Chrome

```
<manifest>
	<meta-data
    	android:name="android.webkit.WebView.EnableSafeBrowsing"
        android:value="true" />
    <!-- ... --->
</manifest>
``` 

## Adaptive icons


## Date, time and calendars

* [How to Correctly Format Date/Time Strings on Android](http://blog.danlew.net/2013/06/27/how_to_correctly_format_date_time_strings_on_android/)


## Android O 

* [Android O Features and APIs - Android Developers](https://developer.android.com/preview/api-overview.html)
* [Android O Behavior Changes - Android Developers](https://developer.android.com/preview/behavior-changes.html)

## Location

* [Android Developers Blog: Reduce friction with the new Location APIs](https://android-developers.googleblog.com/2017/06/reduce-friction-with-new-location-apis.html)

## VectorDrawable

* [From Illustrator to Android XML](https://blog.prototypr.io/from-illustrator-to-android-xml-47e25b713e6b)

## Launcer Icon Sizes

size identifier | size 
----------------|------
ldpi | 36x36
mdpi | 48x48
hdpi | 72x72 
xhdpi | 96x96
xxhdpi | 144x144
xxxhdpi | 192x192
Google Play | 512x512


## Google Play Referrer API

See http://android-developers.googleblog.com/2017/11/google-play-referrer-api-track-and.html


## Auto-backup for apps

[Android Developers Blog: Discover tools for Android data migration and improve your app retention](https://android-developers.googleblog.com/2018/02/discover-tools-for-android-data.html)

## Resources

* [Android Developer Fundamentals (Version 2) — Concepts](https://google-developer-training.github.io/android-developer-fundamentals-course-concepts-v2/)

## Checklist



```
Udacity Android Developer Nanodegree - Core App Quality Guidelines

        Visual Design and User Interaction

              Standard Design

                    App does not redefine the expected function of a system icon (such as the Back button).

                    App does not redefine or misuse Android UI patterns, such that icons or behaviors could be misleading or confusing to users.

              Navigation

                    App supports standard system Back button navigation and does not make use of any custom, on-screen "Back button" prompts.

                    All dialogs are dismissible using the Back button.

                    Pressing the Home button at any point navigates to the Home screen of the device.

              Functionality

                    Permissions

                          App does not redefine or misuse Android UI patterns, such that icons or behaviors could be misleading or confusing to users.

                          App does not request permissions to access sensitive data or services that can cost the user money, unless related to a core capability of the app.

                    User/App State

                          App correctly preserves and restores user or app state, that is , student uses a bundle to save app state and restores it via onSaveInstanceState/onRestoreInstanceState. For example,

                                When a list item is selected, it remains selected on rotation.

                                When an activity is displayed, the same activity appears on rotation.

                                User text input is preserved on rotation.

                                Maintains list items positions on device rotation.

                          When the app is resumed after the device wakes from sleep (locked) state, the app returns the user to the exact state in which it was last used.

                          When the app is relaunched from Home or All Apps, the app restores the app state as closely as possible to the previous state.

              Performance and Stability

                    Stability

                          App does not crash, force close, freeze, or otherwise function abnormally on any targeted device.

              Google Play

                    Content Policies

                          All content is safe for work content.

                          App adheres to the Google Play Store App policies.

                          App’s code follows standard Java/Android Style Guidelines.
                          
 ```

# Android TV Development Notes



## Best practices


## Features 

* Recommendations
* Watch Next


## Adoption

80 % Android 7+ (Source: 

## Recommendations

* Single app that supports both mobile and TV devices (i.e. use multiple APK support if needed)

* Any TV app activity that is subject to disconnect and reconnect events must be configured to handle reconnection events in the app manifest ([Manage TV controllers](https://developer.android.com/training/tv/start/controllers))


>  Recommendations channels are only available in Android 8.0 (API level 26) and later. You must use them to supply recommendations for apps running in Android 8.0 (API level 26) and later. To supply recommendations for apps running on earlier versions of Android, your app must use the [recommendations row](https://developer.android.com/training/tv/discovery/recommendations-row.html) instead. 

-- [Recommend content on the home screen](https://developer.android.com/training/tv/discovery/recommendations.html)


## Resources: 

* [Build TV apps](https://developer.android.com/training/tv/start)
* [Design for Android TV](https://developer.android.com/design/tv/index.html)
* [Help users find your content on Android TV](https://developer.android.com/training/tv/discovery?hl=en)

## Samples

* [googlesamples/androidtv-Leanback: Android TV Leanback Support Library sample app](https://github.com/googlesamples/androidtv-Leanback/)
